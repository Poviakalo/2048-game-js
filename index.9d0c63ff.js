const t=new class{constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){this.board=t,this.score=0,this.status="idle"}transposeBoard(){this.board=this.board[0].map((t,e)=>this.board.map(t=>t[e]))}moveLeft(){let t=this.board.map(t=>{let e=t.filter(t=>t>0);for(let t=0;t<e.length-1;t++)e[t]===e[t+1]&&(e[t]*=2,this.score+=e[t],e.splice(t+1,1));for(;e.length<4;)e.push(0);return e});JSON.stringify(t)!==JSON.stringify(this.board)&&(this.board=t,this.generateRandomTile())}moveRight(){this.board=this.board.map(t=>t?.reverse()),this.moveLeft(),this.board=this.board.map(t=>t?.reverse())}moveUp(){this.transposeBoard(),this.moveLeft(),this.transposeBoard()}moveDown(){this.transposeBoard(),this.moveRight(),this.transposeBoard()}getScore(){return this.score}getState(){return this.board.map(t=>[...t])}getStatus(){return this.status}start(){this.status="playing",this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.generateRandomTile(),this.generateRandomTile()}restart(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle",this.generateRandomTile(),this.generateRandomTile(),this.status="playing"}generateRandomTile(){let t=[];if(this.board.forEach((e,s)=>{e.forEach((e,a)=>{0===e&&t.push([s,a])})}),0===t.length)return;let[e,s]=t[Math.floor(Math.random()*t.length)];this.board[e][s]=.1>Math.random()?4:2}canMove(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(0===this.board[t][e]||e<3&&this.board[t][e]===this.board[t][e+1]||t<3&&this.board[t][e]===this.board[t+1][e])return!0;return!1}updateBoard(){this.canMove()||(this.status="lose"),this.board.forEach(t=>{t.find(t=>2048===t)&&(this.status="win")})}},e=document.querySelector(".button"),s=document.querySelector(".game-field"),a=document.querySelector(".game-score");function r(){let e=s.querySelectorAll(".field-cell"),r=t.getState();e.forEach((t,e)=>{let s=Math.floor(e/4),a=e%4;t.className="field-cell",0!==r[s][a]?(t.textContent=r[s][a],t.classList.add(`field-cell--${r[s][a]}`)):t.textContent=""}),a.textContent=t.getScore()}function o(t){let e=document.querySelector(".message-lose"),s=document.querySelector(".message-win"),a=document.querySelector(".message-start");switch(e.classList.add("hidden"),s.classList.add("hidden"),a.classList.add("hidden"),t){case"lose":e.classList.remove("hidden");break;case"win":s.classList.remove("hidden");break;case"idle":a.classList.remove("hidden")}}e.addEventListener("click",()=>{"playing"!==t.status?(t.start(),e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart"):t.restart(),r(),o(t.status)}),document.addEventListener("keydown",e=>{if("playing"===t.status){switch(e.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown()}t.updateBoard(),r(),o(t.status)}});
//# sourceMappingURL=index.9d0c63ff.js.map
